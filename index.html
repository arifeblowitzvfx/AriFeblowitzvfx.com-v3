<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ariel (Ari) Feblowitz — Portfolio</title>
  <meta name="description" content="Ariel (Ari) Feblowitz — Techvis & Virtual Production Supervisor / Previs-Postvis Artist. Demo reel, credits, projects, and links." />
  <meta property="og:title" content="Ariel (Ari) Feblowitz — Portfolio" />
  <meta property="og:description" content="Techvis & Virtual Production Supervisor. Demo reel, IMDb credits, projects, and links." />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#0c0f12" />
  <style>
    :root{
      --bg:#0b0f11;
      --panel:#020405;
      --card:#05090b;
      --txt:#9fffcf;
      --muted:#74cdaa;
      --accent:#00ff9c;
      --accent-2:#42ffd1;
      --grid:clamp(14px, 1.8vw, 24px);
      --radius:18px;
      --shadow:0 14px 40px rgba(0,0,0,.45);
      /* NEW: banner sizing */
      --tile: clamp(140px, 16vw, 220px); /* square tile size */
      --tile-gap: clamp(10px,1.2vw,16px);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--txt);
      background:
        radial-gradient(1200px 700px at 20% -10%, #122e29 0%, transparent 60%),
        radial-gradient(1000px 600px at 120% 10%, #142027 0%, transparent 60%),
        linear-gradient(#080b0e, var(--bg) 40%);
      font:clamp(15px, 1.1vw, 18px)/1.65 Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      overflow-y:overlay;
      letter-spacing:.15px;
      min-height:100svh;
    }
    body::after{content:""; position:fixed; inset:0; pointer-events:none; background-image:repeating-linear-gradient(to bottom, rgba(66,255,209,.06), rgba(66,255,209,.06) 1px, transparent 2px, transparent 3px); mix-blend-mode:soft-light; opacity:.35; z-index:0}

    a{color:var(--accent); text-decoration:none}
    a:hover{filter:brightness(1.18)}

    /* Full-bleed, looping banner (fixed-size, overlap-proof) */
    .banner{position:relative; width:100vw; left:50%; right:50%; margin-left:-50vw; margin-right:-50vw; padding:clamp(8px,1.2vw,14px) 0; z-index:1}
    .banner .rail{
      height:var(--tile);
      position:relative; overflow:hidden; border-radius:clamp(10px,1.4vw,18px);
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0));
      border:1px solid rgba(0,255,156,.15); box-shadow:var(--shadow)
    }
    .marquee{
      position:absolute; inset:0;
      display:flex; align-items:center; gap:0;
      will-change:transform; flex-wrap:nowrap;
      width:max-content; /* width equals content width */
      animation-name:scrollX; animation-timing-function:linear; animation-iteration-count:infinite;
    }
    /* animate one full content-width (-100%) for a seamless loop */
    @keyframes scrollX{ from{ transform:translateX(0) } to{ transform:translateX(-100%) } }

    .marquee .track{
      display:inline-flex; align-items:center; flex-wrap:nowrap;
    }

    .tile{
      flex:0 0 auto;
      width:var(--tile); height:var(--tile); /* square slots */
      position:relative; border-radius:clamp(8px,1vw,14px);
      overflow:hidden; background:#0b1414; border:1px solid rgba(66,255,209,.18);
      margin-right:var(--tile-gap);
    }
    .tile img{height:100%; width:100%; object-fit:cover; object-position:center; display:block}
    .tile[data-missing="1"]{display:none}
    .tile::after{
      content:attr(data-title); position:absolute; left:0; right:0; bottom:0;
      font-size:clamp(10px,.9vw,12px); padding:.45em .6em; color:#caffec;
      background:linear-gradient(180deg, transparent, rgba(0,0,0,.75)); text-shadow:0 1px 2px rgba(0,0,0,.55)
    }

    .wrap{max-width:min(1200px, 92vw); margin:0 auto; padding:clamp(16px,2vw,28px); position:relative; z-index:1}

    .nav{display:flex; gap:clamp(8px,1vw,12px); align-items:center; justify-content:space-between; flex-wrap:wrap; margin:clamp(6px,.8vw,10px) 0}
    .brand{display:flex; gap:clamp(10px,1.2vw,14px); align-items:center}
    .brand .dot{width:clamp(10px,1vw,14px); height:clamp(10px,1vw,14px); border-radius:50%; background:radial-gradient(circle at 30% 30%, var(--accent), #0f4630 70%); box-shadow:0 0 16px var(--accent)}
    .brand h1{margin:0; font-weight:800; font-size:clamp(18px,2.2vw,28px); letter-spacing:.12em; text-transform:uppercase; color:#d9fff1}
    .pill{border:1px dashed rgba(66,255,209,.35); border-radius:999px; padding:.4em .8em; font-size:clamp(11px,1vw,12px); color:var(--muted)}

    .tabs{display:flex; gap:clamp(6px,.8vw,10px); flex-wrap:wrap}
    .tab-btn{padding:.6em .9em; border-radius:12px; background:var(--panel); color:var(--txt); border:1px solid rgba(66,255,209,.18); cursor:pointer; font-weight:600}
    .tab-btn.active{outline:1px solid var(--accent); box-shadow:0 0 0 2px rgba(0,255,156,.12) inset}

    .hero{margin:clamp(12px,1.6vw,20px) 0; display:grid; grid-template-columns:1.1fr .9fr; gap:var(--grid)}
    @media (max-width:920px){ .hero{grid-template-columns:1fr} }

    .card{background:var(--panel); border:1px solid rgba(66,255,209,.2); border-radius:var(--radius); box-shadow:var(--shadow)}
    .pad{padding:clamp(14px,1.6vw,20px)}

    .reel{position:relative; aspect-ratio:16/9; border-radius:14px; overflow:hidden; background:#000; border:1px solid rgba(66,255,209,.22)}
    .reel iframe{position:absolute; inset:0; width:100%; height:100%}

    .badges{display:flex; flex-wrap:wrap; gap:clamp(8px,1vw,12px); margin-top:clamp(8px,1vw,12px)}
    .btn{--b:rgba(66,255,209,.18); display:inline-flex; align-items:center; gap:.5em; border:1px solid var(--b); background:linear-gradient(180deg, rgba(66,255,209,.09), rgba(66,255,209,0)); padding:.65em 1em; border-radius:12px; color:var(--txt); cursor:pointer; font-weight:700}
    .btn:hover{border-color:var(--accent); box-shadow:0 0 0 1px rgba(0,255,156,.15) inset}
    .btn.primary{background:linear-gradient(180deg, rgba(0,255,156,.28), rgba(0,255,156,.12)); color:#eafff6; text-shadow:0 1px 0 rgba(0,0,0,.6); font-weight:800}

    section{display:none}
    section.active{display:block}
    .grid{display:grid; grid-template-columns:repeat(3, 1fr); gap:var(--grid)}
    @media (max-width:1000px){ .grid{grid-template-columns:repeat(2, 1fr)} }
    @media (max-width:620px){ .grid{grid-template-columns:1fr} }
    .proj{overflow:hidden}
    .thumb{position:relative; aspect-ratio:16/9; overflow:hidden; border-radius:14px; border:1px solid rgba(66,255,209,.22)}
    .thumb img{width:100%; height:100%; object-fit:cover; display:block}
    .proj .meta{padding:.7em .9em 1em}
    .proj .title{font-weight:800; color:#e2fff5}
    .proj .role{color:var(--muted); font-size:.9em}

    footer{opacity:.8; font-size:.85em; padding:clamp(28px,2.5vw,40px) 0 20px}
  </style>
</head>
<body>
  <!-- FULL-BLEED BANNER -->
  <div class="banner">
    <div class="rail card">
      <div class="marquee" id="bannerTrack" aria-label="Professional & Personal">
        <div class="track" id="trackA"></div>
        <div class="track" id="trackB"></div>
      </div>
    </div>
  </div>

  <div class="wrap">
    <!-- NAV -->
    <div class="nav">
      <div class="brand">
        <div class="dot" aria-hidden="true"></div>
        <h1>Ariel (Ari) Feblowitz</h1>
        <span class="pill">Techvis & Virtual Production Supervisor</span>
      </div>
      <div class="tabs" role="tablist" aria-label="Sections">
        <button class="tab-btn active" data-tab="home" role="tab" aria-selected="true">Home</button>
        <button class="tab-btn" data-tab="professional" role="tab" aria-selected="false">Professional</button>
        <button class="tab-btn" data-tab="personal" role="tab" aria-selected="false">Personal</button>
      </div>
    </div>

    <!-- HOME -->
    <section id="home" class="active" role="tabpanel">
      <div class="hero">
        <div class="card pad">
          <h2 style="margin:0 0 .6em">Demo Reel</h2>
          <div class="reel">
            <iframe id="reelFrame" src="" title="Ari Feblowitz — Demo Reel" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
          </div>
          <div class="badges">
            <a id="btnIMDb" class="btn" href="#" target="_blank" rel="noopener">IMDb</a>
            <a id="btnYouTube" class="btn" href="#" target="_blank" rel="noopener">YouTube</a>
            <a id="btnLinks" class="btn" href="#" target="_blank" rel="noopener">All My Links</a>
            <a id="btnResume" class="btn primary" href="#" download>Download Résumé</a>
            <a id="btnNews" class="btn" href="#" target="_blank" rel="noopener">Ari in the News</a>
          </div>
        </div>
        <div class="card pad">
          <h2 style="margin:0 0 .6em">About</h2>
          <p>Bridging virtual and physical storytelling across techvis, previs/postvis, and virtual production. I translate complex sequences into precise, repeatable camera plans — trusted by directors, DPs, and VFX supervisors.</p>
          <p class="muted">Credits include Avatar: The Way of Water, Avengers: Endgame, Ant-Man and the Wasp, Guardians of the Galaxy Vol. 3, Twisters, and more.</p>
          <div class="badges">
            <span class="pill">Motion Control</span>
            <span class="pill">Unreal Engine</span>
            <span class="pill">Maya</span>
            <span class="pill">Shot Design</span>
          </div>
          <div class="badges">
            <span class="pill">Virtual Production</span>
            <span class="pill">On-Set Techvis</span>
            <span class="pill">Cyclops VP</span>
            <span class="pill">Technodolly</span>
            <span class="pill">Spydercam</span>
            <span class="pill">Sequencer</span>
            <span class="pill">Maya Python</span>
            <span class="pill">Camera Planning</span>
          </div>
        </div>
      </div>
    </section>

    <!-- PROFESSIONAL PROJECTS -->
    <section id="professional" role="tabpanel">
      <div class="card pad">
        <div class="nav" style="gap:8px; justify-content:space-between; align-items:flex-end">
          <h2 style="margin:0">Professional Projects</h2>
          <small class="muted">(Curated via CONFIG • Posters auto-fallback & title-on-black if all fail)</small>
        </div>
        <div id="proGrid" class="grid"></div>
      </div>
    </section>

    <!-- PERSONAL PROJECTS -->
    <section id="personal" role="tabpanel">
      <div class="card pad">
        <div class="nav" style="gap:8px; justify-content:space-between; align-items:flex-end">
          <h2 style="margin:0">Personal Projects</h2>
          <small class="muted">(Hand-picked videos • Shorts excluded)</small>
        </div>
        <div id="personalGrid" class="grid"></div>

        <!-- NEW: FebzFoundFootage Feature (above Latest from YouTube) -->
        <div class="card pad" id="febzBox" style="margin-top:var(--grid);">
          <h3 style="margin-top:0">Also archiving my father's documentary work: <a href="https://www.youtube.com/@FebzFoundFootage" target="_blank" rel="noopener">FebzFoundFootage</a></h3>
          <a id="febzLink" href="#" target="_blank" rel="noopener" class="thumb" style="display:block; aspect-ratio:16/9;">
            <img id="febzThumb" alt="FebzFoundFootage — Featured" style="width:100%; height:100%; object-fit:cover; display:block; border-radius:14px; border:1px solid rgba(66,255,209,.22)" />
          </a>
        </div>

        <!-- Latest from YouTube (auto-updating uploads playlist) -->
        <div class="card pad" id="latestBox" style="margin-top:var(--grid); display:none">
          <h3 style="margin-top:0">Latest from YouTube</h3>
          <div class="reel" style="aspect-ratio:16/9">
            <iframe id="latestFrame" src="" title="YouTube uploads" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
          </div>
          <small class="muted">This auto-pulls your uploads feed from YouTube. Shorts may still appear inside the feed.</small>
        </div>
      </div>
    </section>

    <footer class="muted">© <span id="year"></span> Ariel (Ari) Feblowitz • Single-file GitHub Page • Theme: Tech-Noir</footer>
  </div>

  <script>
    /* =========================
       CONFIG — EDIT THIS ONLY
       ========================= */
    const CONFIG = {
      youtubeId: "REPLACE_WITH_YOUTUBE_ID",
      imdbUrl: "https://www.imdb.com/name/nm4409645/",
      youtubeUrl: "https://www.youtube.com/@DirectorPsycho",
      allLinksUrl: "https://linktr.ee/arielfeblowitz",
      newsUrl: "https://www.youtube.com/watch?v=gM5H6vsGIcs",
      resumeFile: "https://raw.githubusercontent.com/arifeblowitzvfx/AriFeblowitzvfx.com-v3/main/Ari_Feblowitz_Resume_2025.pdf",

      showLatestFromYouTube: true,
      youtubeChannelId: "UC926CKBvQdno5vqAav7DKlg",

      /* NEW: FebzFoundFootage feature video */
      febzFeaturedVideoId: "AAebMfrFtWs",

      // Professional — newest/high-profile first
      proProjects: [
        { title:"Predator: Badlands (TBA)", role:"Visualization", posters:[
          "https://upload.wikimedia.org/wikipedia/en/9/90/Predator_Badlands_Poster.jpg",
          "https://upload.wikimedia.org/wikipedia/en/9/9b/Predator_%281987%29_poster.jpg"
        ], url:"https://www.imdb.com/title/tt31227572/" },
        { title:"Fantastic Four — First Steps (Pre-Prod)", role:"Visualization / Techvis", posters:[
          "https://upload.wikimedia.org/wikipedia/commons/2/2f/Fantastic_Four_text_logo.svg",
          "https://upload.wikimedia.org/wikipedia/commons/0/0c/Marvel_Studios_2016_logo.svg"
        ], url:"#" },
        { title:"Avatar: Fire and Ash", role:"Virtual Production / Motion control co-Supervisor", posters:[
          "https://upload.wikimedia.org/wikipedia/en/8/81/Avatar_3_logo.jpg",
          "https://upload.wikimedia.org/wikipedia/en/2/2c/Avatar_The_Way_of_Water_poster.jpg"
        ], url:"https://www.imdb.com/title/tt1757678/" },
        { title:"Star Wars: Skeleton Crew (2023)", role:"On Set Techvis Supervisor", posters:[
          "https://upload.wikimedia.org/wikipedia/en/5/5f/Skeleton_Crew_logo.jpg",
          "https://upload.wikimedia.org/wikipedia/commons/6/6c/Star_Wars_Logo.svg"
        ], url:"https://www.imdb.com/title/tt13918776/" },
        { title:"Shazam! Fury of the Gods (2023)", role:"On Set Virtual Production with Cyclops and Techvis", posters:[
          "https://upload.wikimedia.org/wikipedia/en/1/1a/Shazam!_Fury_of_the_Gods_poster.jpg"
        ], url:"https://www.imdb.com/title/tt10151854/" },
        { title:"Guardians of the Galaxy Vol. 3 (2023)", role:"On Set Visual Effects Techvis Supervisor", posters:[
          "https://upload.wikimedia.org/wikipedia/en/5/50/Guardians_of_the_Galaxy_Vol._3_poster.jpg",
          "https://upload.wikimedia.org/wikipedia/en/4/4f/Guardians_of_the_Galaxy_Vol._3_teaser_poster.jpg"
        ], url:"https://www.imdb.com/title/tt6791350/" },
        { title:"Twisters (2024)", role:"Visualization", posters:[
          "https://upload.wikimedia.org/wikipedia/en/8/8f/Twisters_film_poster.jpg"
        ], url:"https://www.imdb.com/title/tt12584954/" },
        { title:"Avatar: The Way of Water (2022)", role:"Virtual Production / Techvis / Motion Control — On-Set", posters:[
          "https://upload.wikimedia.org/wikipedia/en/2/2c/Avatar_The_Way_of_Water_poster.jpg"
        ], url:"https://www.imdb.com/title/tt1630029/" },
        { title:"Avengers: Endgame (2019)", role:"Techvis / Previs — On-Set", posters:[
          "https://upload.wikimedia.org/wikipedia/en/0/0d/Avengers_Endgame_poster.jpg"
        ], url:"https://www.imdb.com/title/tt4154796/" },
        { title:"Ant-Man and the Wasp (2018)", role:"Techvis — On-Set; scale & motion planning", posters:[
          "https://upload.wikimedia.org/wikipedia/en/2/2c/Ant-Man_and_the_Wasp_poster.jpg"
        ], url:"https://www.imdb.com/title/tt5095030/" },
        { title:"The Mandalorian (TV)", role:"Virtual Production / Visualization — On-Set", posters:[
          "https://upload.wikimedia.org/wikipedia/en/c/c5/The_Mandalorian_season_2_poster.jpg",
          "https://upload.wikimedia.org/wikipedia/en/c/c4/The_Mandalorian_season_3_poster.jpg"
        ], url:"https://www.imdb.com/title/tt8111088/" }
      ],

      // Personal — manual curation (Shorts excluded)
      personalProjects: [
        { title:"Deadpool vs Alien vs Terminator", role:"Animated Fan Parody (Unreal) — viral hit", videoId:"7YIVcQLS9Cw" },
        { title:"Alien vs Terminator", role:"Animated Fan Parody (Unreal) — viral hit", videoId:"HtgCTlpi47s" },
        { title:"Pumpkin Smashers", role:"Animated Short (Unreal). Award-Winning — Chicago Horror Film Fest: Best Animation.", videoId:"q_MFAiCeWUk" },
        { title:"Siren Vs Syren — Siren Tales", role:"Animated Short (Unreal)", videoId:"W5PPhhmMw_g" },
        { title:"Rusalky — Ukrainian Sirens vs Russian Soldiers", role:"Animated Short (Unreal)", videoId:"Jvd-ZTLviOc" },
        { title:"Krampus Night — Animated Christmas Horror Short", role:"Animated Short (Unreal)", videoId:"psCIvWKpHnU" },
        { title:"Siren Tales — Trailer", role:"Series Trailer", videoId:"1OazLvklmdE" },
        { title:"Spirits of Lake Minnetonka — Trailer", role:"Series Trailer", videoId:"Z-UX4szq2LI" },
        { title:"Jurassic Park in Real Life with AR! | Reverse Virtual Production with Cyclops", role:"Reverse Virtual Production", videoId:"yxAMZs1wERQ" }
      ]
    };

    /* =========================
       RUNTIME
       ========================= */
    const $ = (sel, el=document) => el.querySelector(sel);
    const $$ = (sel, el=document) => [...el.querySelectorAll(sel)];

    // Tabs
    $$(".tab-btn").forEach(btn=>{
      btn.addEventListener('click', ()=>{
        $$(".tab-btn").forEach(b=>{ b.classList.toggle('active', b===btn); b.setAttribute('aria-selected', b===btn) });
        const name = btn.dataset.tab; $$("section").forEach(s=>s.classList.toggle('active', s.id===name));
        window.scrollTo({ top: $('.wrap').offsetTop, behavior: 'smooth' });
      })
    });

    // Links & Reel
    const reel = $("#reelFrame");
    if (CONFIG.youtubeId && CONFIG.youtubeId !== 'REPLACE_WITH_YOUTUBE_ID') {
      reel.src = `https://www.youtube.com/embed/${CONFIG.youtubeId}?rel=0&modestbranding=1`;
    } else {
      reel.srcdoc = `
        <style>body{margin:0;display:grid;place-items:center;background:#000;color:#9fb5b8;font:16px system-ui} .box{opacity:.8;text-align:center} .box b{color:#fff}</style>
        <div class='box'>Add your <b>YouTube ID</b> in CONFIG to show the reel.</div>`;
    }
    $("#btnIMDb").href = CONFIG.imdbUrl;
    $("#btnYouTube").href = CONFIG.youtubeUrl;
    $("#btnLinks").href = CONFIG.allLinksUrl;
    if (CONFIG.newsUrl) $("#btnNews").href = CONFIG.newsUrl; else $("#btnNews").classList.add('hide');
    if (CONFIG.resumeFile) $("#btnResume").href = CONFIG.resumeFile;

    // Latest from YouTube (auto-updating uploads playlist)
    if (CONFIG.showLatestFromYouTube && CONFIG.youtubeChannelId){
      const uploadsId = 'UU' + CONFIG.youtubeChannelId.slice(2);
      const latestBox = document.getElementById('latestBox');
      const latestFrame = document.getElementById('latestFrame');
      latestFrame.src = `https://www.youtube.com/embed/videoseries?list=${uploadsId}&rel=0`;
      latestBox.style.display = 'block';
    }

    // FebzFoundFootage feature
    (function setupFebz(){
      const id = CONFIG.febzFeaturedVideoId;
      const link = $("#febzLink");
      const img  = $("#febzThumb");
      if (!id){ link.style.display = 'none'; return; }
      link.href = `https://www.youtube.com/watch?v=${id}`;
      // prefer maxresdefault if present; fall back to hqdefault automatically
      img.src = `https://img.youtube.com/vi/${id}/maxresdefault.jpg`;
      img.addEventListener('error', ()=>{ img.src = `https://img.youtube.com/vi/${id}/hqdefault.jpg`; }, { once:true });
    })();

    // ===== Helpers
    function placeholderTile(){
      return 'data:image/svg+xml;utf8,' + encodeURIComponent(
        "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 800'><rect width='100%' height='100%' fill='#000'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='#74cdaa' font-family='monospace' font-size='22'>Poster unavailable</text></svg>"
      );
    }
    function titlePlaceholderSVG(title){
      const safe = (title||'Untitled').replace(/&/g,'&amp;').replace(/</g,'&lt;');
      const svg = `<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 800'>
        <rect width='100%' height='100%' fill='#000'/>
        <text x='50%' y='50%' fill='#9fffcf' font-family='Inter, Segoe UI, Roboto, Arial, sans-serif' font-size='36' text-anchor='middle' dominant-baseline='middle'>${safe}</text>
      </svg>`;
      return 'data:image/svg+xml;utf8,' + encodeURIComponent(svg);
    }

    // Banner image loader with timeout + retry + periodic refresh
    const BANNER_REFRESH_MS = 30000;
    const BANNER_LOAD_TIMEOUT_MS = 2500;
    const BANNER_MAX_RETRIES = 5;
    const bannerRegistry = new Set();

    function loadWithTimeout(src){
      return new Promise((resolve)=>{
        const img = new Image();
        let done = false;
        const timer = setTimeout(()=>{ if (!done){ done = true; resolve(false); } }, BANNER_LOAD_TIMEOUT_MS);
        img.onload = ()=>{ if (!done){ done = true; clearTimeout(timer); resolve(true); } };
        img.onerror = ()=>{ if (!done){ done = true; clearTimeout(timer); resolve(false); } };
        img.src = src + (src.includes('?') ? `&cb=${Date.now()}` : `?cb=${Date.now()}`);
      });
    }

    async function attemptBannerImage(tileEl){
      const desired = tileEl.getAttribute('data-src');
      let retries = +(tileEl.getAttribute('data-retries')||0);
      if (!desired || retries >= BANNER_MAX_RETRIES) return;
      const ok = await loadWithTimeout(desired);
      if (ok){
        const img = tileEl.querySelector('img');
        img.src = desired;
        tileEl.removeAttribute('data-missing');
      } else {
        retries += 1;
        tileEl.setAttribute('data-retries', String(retries));
        tileEl.setAttribute('data-missing','1');
      }
    }

    function scheduleBannerRefresh(){
      setInterval(()=>{
        bannerRegistry.forEach(tile=>{
          if (tile.isConnected && tile.getAttribute('data-missing') === '1'){
            attemptBannerImage(tile);
          }
        })
      }, BANNER_REFRESH_MS);
    }

    const ytThumb = (id) => `https://img.youtube.com/vi/${id}/hqdefault.jpg`;

    // ===== Banner — built from pro posters + personal thumbs (interleaved)
    const marquee = document.getElementById('bannerTrack');
    const trackA = document.getElementById('trackA');
    const trackB = document.getElementById('trackB');

    function buildBanner(){
      const pro = (CONFIG.proProjects||[]).flatMap(p => {
        const posters = Array.isArray(p.posters)? p.posters.filter(Boolean) : [];
        return posters.map(src => ({ title:p.title, img:src, url:p.url||'#' }));
      });
      const personal = (CONFIG.personalProjects||[]).map(v => ({
        title: v.title,
        img: ytThumb(v.videoId),
        url: `https://www.youtube.com/watch?v=${v.videoId}`
      }));
      const tiles = [];
      const maxLen = Math.max(pro.length, personal.length);
      for(let i=0;i<maxLen;i++){ if (i<pro.length) tiles.push(pro[i]); if (i<personal.length) tiles.push(personal[i]); }

      const mk = t => {
        const a = document.createElement('a'); a.className='tile'; a.href=t.url||'#'; a.target='_blank'; a.rel='noopener'; a.setAttribute('data-title', t.title||'');
        const img = new Image(); img.loading='lazy'; img.alt=''; img.src = placeholderTile();
        a.appendChild(img);
        a.setAttribute('data-src', t.img);
        a.setAttribute('data-retries', '0');
        bannerRegistry.add(a);
        setTimeout(()=>attemptBannerImage(a), 250);
        return a;
      };

      trackA.innerHTML = ''; trackB.innerHTML = '';
      if (!tiles.length){
        const ph = mk({ title:'Add projects/videos in CONFIG', img: placeholderTile(), url:'#' });
        trackA.appendChild(ph.cloneNode(true)); trackB.appendChild(ph.cloneNode(true));
      } else {
        tiles.forEach(t=> trackA.appendChild(mk(t)));
        // duplicate for seamless loop
        tiles.forEach(t=> trackB.appendChild(mk(t)));
      }

      // Set duration by content width to avoid “compression”
      requestAnimationFrame(()=>{
        const fullWidth = trackA.scrollWidth + trackB.scrollWidth;
        const pxPerSec = 60; // adjust to taste
        const dur = Math.max(20, Math.round(fullWidth / pxPerSec));
        marquee.style.animationDuration = dur + 's';
      });
    }

    // ===== Grids
    function mkPosterImg(posterList, opts={}){
      const img = document.createElement('img');
      img.loading='lazy'; img.alt='';
      const posters = (Array.isArray(posterList)? posterList : []).filter(Boolean);
      const candidates = posters.slice();
      if (opts.placeholderTitle){
        candidates.push(titlePlaceholderSVG(opts.placeholderTitle));
      } else {
        candidates.push(placeholderTile());
      }
      let i = 0;
      const setNext = ()=>{ if (i < candidates.length){ img.src = candidates[i++]; } };
      img.addEventListener('error', setNext);
      setNext();
      return img;
    }

    function renderGrid(el, arr){
      el.innerHTML = '';
      if (!arr || !arr.length){ el.innerHTML = `<div class="muted">No items yet. Edit <b>CONFIG</b> in this file to add projects.</div>`; return; }
      arr.forEach(p=>{
        const c = document.createElement('a'); c.className='proj card'; c.href=p.url||'#'; c.target='_blank'; c.rel='noopener';
        const poster = mkPosterImg(p.posters||[], { placeholderTitle: p.title });
        const wrap = document.createElement('div'); wrap.className='thumb'; wrap.appendChild(poster);
        const meta = document.createElement('div'); meta.className='meta';
        meta.innerHTML = `<div class="title">${p.title||''}</div><div class="role">${p.role||''}</div>`;
        c.appendChild(wrap); c.appendChild(meta);
        el.appendChild(c);
      })
    }

    function renderPersonal(el, arr){
      const items = (arr||[]).map(v=>({ title:v.title, role:v.role, url:`https://www.youtube.com/watch?v=${v.videoId}`, posters:[ytThumb(v.videoId)] }));
      renderGrid(el, items);
    }

    // ===== Init
    buildBanner();
    scheduleBannerRefresh();
    renderGrid($("#proGrid"), CONFIG.proProjects);
    renderPersonal($("#personalGrid"), CONFIG.personalProjects);
    $("#year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
